namespace: io.cloudslang.microfocus.smax.commons
flow:
  name: create_entitiy
  inputs:
    - entity_type
    - entity_id
    - fields:
        required: false
    - token
    - tenant_id
    - smax_server
    - smax_port
    - smax_protocol
  workflow:
    - http_client_get:
        do:
          io.cloudslang.base.http.http_client_get:
            - url: "${smax_protocol+'://'+smax_server+':'+smax_port+'/rest/'+tenant_id+'/ems/'+entity_type+'/'+entity_id}"
            - trust_all_roots: 'true'
            - headers: "${'Cookie:LWSSO_COOKIE_KEY='+token}"
        publish:
          - return_result
        navigate:
          - SUCCESS: SUCCESS
          - FAILURE: on_failure
  outputs:
    - flow_output_0: '${return_result}'
  results:
    - FAILURE
    - SUCCESS
extensions:
  graph:
    steps:
      http_client_get:
        x: 223
        'y': 126
        navigate:
          26bca49c-c7f5-4b8a-ee19-e9b894ab4c5e:
            targetId: 2201986a-e9f7-1526-a01a-0c11975cc1e5
            port: SUCCESS
    results:
      SUCCESS:
        2201986a-e9f7-1526-a01a-0c11975cc1e5:
          x: 407
          'y': 170
